!function(){"use strict";function e(e,t){function n(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n)}function o(t,n){var o=e.onerror;e.onerror=function(){n.apply(t,arguments),"function"==typeof o&&o.apply(e,arguments)}}function i(t){if(!t.clientContext){var n={url:e.location.href,userAgent:e.navigator.userAgent||null,platform:e.navigator.platform||null};t.clientContext=n}return t.clientContext}function s(){var e=t.cookie,n=e.indexOf(c);if(n>=0){var o=e.indexOf(";",n+1);return o=o<0?e.length:o,e.slice(n+d,o)}}function r(e){t.cookie=c+"="+e}function a(){this.sendCaughtExceptions=!1,this.attachClientContext=!0,this.devMode=!1}var c="trcksesh",d=c.length+1,l={};a.prototype={onerror:function(e,t,n,o,i){var s={message:e,lineno:n,colno:o,stack:i?i.stack:"n/a"};this.logException(s)},setSession:function(e){this.sessionId=e||this.sessionId||s()||n(),r(this.sessionId)},logEvent:function(e){this.push({type:"event",event:e})},logException:function(e){this.push({level:"error",type:"exception",exception:e})},logMessage:function(e,t){var n={type:"message",message:e};t&&(n.level=t),this.push(n)},logMetric:function(e,t){this.push({type:"metric",metric:e,value:t})},startTimer:function(t){var n=e.performance;n.now?(l[t]&&console.warn("Timing metric '"+t+"' already started"),console.debug("timer started for:",t),l[t]=n.now()):console.warn("window.performance is not defined")},stopTimer:function(t){var n=e.performance;if(n.now){var o=n.now(),i=l[t];if(void 0!==i){var s=Math.round(o-i);l[t]=void 0,console.debug("timer stopped for:",t,"time="+s),this.logMetric(t,s)}else console.warn("Timing metric '"+t+"' wasn't started")}},push:function(e){var t=typeof e;if("object"===t||"string"===t){if("string"===t)e={text:e};else if(void 0!==e.devMode&&(this.devMode=!!e.devMode,delete e.devMode),void 0!==e.attachClientContext&&(this.attachClientContext=!!e.attachClientContext,delete e.attachClientContext),e.sessionId&&(this.setSession(e.sessionId),delete e.sessionId),e.endpoint&&(this.sessionId||this.setSession(),this.endpoint=e.endpoint,delete e.endpoint),void 0!==e.sendCaughtExceptions){var n=!!e.sendCaughtExceptions;this.sendCaughtExceptions=n,n&&o(this,this.onerror),delete e.sendCaughtExceptions}this.track(e)}},track:function(t){if(this.endpoint&&Object.keys(t).length>0)if(t.sessionId=this.sessionId,this.attachClientContext&&(t.context=i(this)),this.devMode)console.debug("Simple-Tracker: POST "+this.endpoint,t);else try{var n=new e.XMLHttpRequest;n.open("POST",this.endpoint,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}catch(n){e.console&&"function"==typeof e.console.log&&(console.log("Failed to send tracking request because of this exception:\n"+n),console.log("Failed tracking data:",t))}}};var u,f=e.tracker;if(f&&f instanceof a)u=f;else if(f&&f.length){u=new a;var h=0,p=f.length;for(h=0;h<p;h++)u.push(f[h])}else u=new a;return e.tracker=u,e.SimpleTracker=a,u}var t="undefined"!=typeof module&&module.exports;if("undefined"!=typeof window){var n=e(window,window.document);t&&(e.default=n,module.exports=n)}else{if(!t)throw new Error("");e.default=e,module.exports=e}}();
//# sourceMappingURL=simple-tracker.min.map